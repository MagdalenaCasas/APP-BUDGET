{"ast":null,"code":"var _jsxFileName = \"/Users/mariamagdalenacasas/Documents/GitHub/APP-BUDGET/budget-app/src/Context/FetchApiContext.jsx\",\n    _s = $RefreshSig$();\n\nimport { createContext, useEffect } from \"react\";\nimport { useState } from \"react\";\nimport React from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const FetchApiContext = /*#__PURE__*/createContext();\nexport const FetchApiContextProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [userEmail, setUserEmail] = useState();\n  const [userName, setUserName] = useState();\n  const [userLastName, setUserLastName] = useState();\n  const [password, setPassword] = useState();\n  const [repetPassword, setRepetPassword] = useState();\n  const [errorMessage, setErrorMessage] = useState();\n  const [response, setResponse] = useState();\n  const [amount, setamount] = useState();\n  const [concept, setConcept] = useState();\n  const [type, setType] = useState();\n  const [idMovement, setIdMovement] = useState();\n  const [movements, setMovements] = useState([]);\n  const [incomes, setIncomes] = useState([]);\n  const [egress, setEgress] = useState([]);\n  const [btnAgregar, setBtnAgregar] = useState();\n  const [btnEditar, setBtnEditar] = useState();\n  const [typeLabel, setTypeLabel] = useState(\"\");\n  const [totalBudget, setTotalBudget] = useState(0);\n  const [hidden, setHidden] = useState(\"hidden\");\n  const [param, setParam] = useState([]);\n  const navigate = useNavigate();\n  const IncomeArray = [];\n  const EgressArray = [];\n  /* Fetch Login.............. */\n\n  const Login = async () => {\n    const handleClick = () => {\n      navigate(\"/home\");\n    };\n\n    var myHeaders = new Headers();\n    myHeaders.append(\"Content-Type\", \"application/json\");\n    var raw = JSON.stringify({\n      \"email\": userEmail,\n      \"password\": password\n    });\n    var requestOptions = {\n      method: 'POST',\n      headers: myHeaders,\n      body: raw,\n      redirect: 'follow'\n    };\n\n    try {\n      fetch(\"http://localhost:3000/login\", requestOptions).then(response => {\n        return response;\n      }).then(result => {\n        if (result.status == 200) {\n          setErrorMessage(\"\");\n          result.json().then(token => {\n            console.log(token);\n            localStorage.setItem(\"token\", `Bearer ${token.token}`);\n            localStorage.setItem(\"id\", token.id);\n            handleClick();\n          });\n        } else {\n          result.json().then(message => {\n            setErrorMessage(message);\n          });\n        }\n      });\n    } catch (error) {\n      setErrorMessage(error.message);\n    }\n  };\n  /* Fetch Registro.............. */\n\n\n  const SignIn = async () => {\n    const redirect = () => {\n      navigate(\"/\");\n    };\n\n    var myHeaders = new Headers();\n    myHeaders.append(\"Authorization\", localStorage.getItem(\"token\"));\n    myHeaders.append(\"Content-Type\", \"application/json\");\n    var raw = JSON.stringify({\n      \"name\": userName,\n      \"lastName\": userLastName,\n      \"email\": userEmail,\n      \"password\": password\n    });\n    var requestOptions = {\n      method: 'POST',\n      headers: myHeaders,\n      body: raw,\n      redirect: 'follow'\n    };\n\n    try {\n      fetch(\"http://localhost:3000/newUser\", requestOptions).then(response => {\n        return response;\n      }).then(result => {\n        console.log(result.status);\n\n        if (result.status === 201) {\n          setErrorMessage(\"\");\n          result.json().then(res => {\n            setResponse(res);\n            setTimeout(() => {\n              redirect();\n              setResponse(\"\");\n            }, 2000);\n          });\n        } else {\n          result.json().then(message => {\n            console.log(message);\n          });\n        }\n      });\n    } catch (error) {\n      setErrorMessage(error.message);\n    }\n  };\n  /*FETCH GET MOVIMIENTOS */\n\n\n  const GetMovimiento = async () => {\n    var myHeaders = new Headers();\n    myHeaders.append(\"Authorization\", localStorage.getItem(\"token\"));\n    var requestOptions = {\n      method: 'GET',\n      headers: myHeaders,\n      redirect: 'follow'\n    };\n    fetch(\"http://localhost:3000/budget\", requestOptions).then(response => response.json()).then(result => {\n      const lastMovements = result.reverse();\n      setMovements(result.reverse());\n      setParam(lastMovements.slice(-10));\n      let counter = 0;\n      result.forEach(move => {\n        if (move.type === \"INCOME\") {\n          IncomeArray.push(move);\n          counter = counter + parseInt(move.amount);\n          ingresos.push(parseInt(move.amount));\n        } else if (move.type === \"EGRESS\") {\n          EgressArray.push(move);\n          counter = counter - parseInt(move.amount);\n          egress = egress + parseInt(move.amount);\n          egresos.push(parseInt(move.amount));\n        }\n      });\n      console.log(ingresos);\n      setTotalBudget(counter);\n      setEgress(EgressArray);\n      setIncomes(IncomeArray);\n    }).catch(error => console.log('error', error));\n  };\n  /* Fetch AGREGAR MOVIMIENTOS.............. */\n\n\n  const AgregarMovimiento = async () => {\n    var myHeaders = new Headers();\n    myHeaders.append(\"Authorization\", localStorage.getItem(\"token\"));\n    myHeaders.append(\"Content-Type\", \"application/json\");\n    var raw = JSON.stringify({\n      \"type\": type,\n      \"amount\": amount,\n      \"concept\": concept,\n      \"user_id\": localStorage.getItem(\"id\")\n    });\n    var requestOptions = {\n      method: 'POST',\n      headers: myHeaders,\n      body: raw,\n      redirect: 'follow'\n    };\n    fetch(\"http://localhost:3000/budget\", requestOptions).then(response => response.json()).then(result => console.log(result), GetMovimiento()).catch(error => console.log('error', error));\n  };\n\n  const DeleteMovement = async id => {\n    var myHeaders = new Headers();\n    myHeaders.append(\"Authorization\", localStorage.getItem(\"token\"));\n    var requestOptions = {\n      method: 'DELETE',\n      headers: myHeaders,\n      redirect: 'follow'\n    };\n    fetch(`http://localhost:3000/budget/${id}`, requestOptions).then(response => response.json()).then(result => GetMovimiento()).catch(error => console.log('error', error));\n  };\n\n  const EditMovement = async id => {\n    var myHeaders = new Headers();\n    myHeaders.append(\"Authorization\", localStorage.getItem(\"token\"));\n    myHeaders.append(\"Content-Type\", \"application/json\");\n    var raw = JSON.stringify({\n      \"amount\": amount,\n      \"concept\": concept\n    });\n    var requestOptions = {\n      method: 'PUT',\n      headers: myHeaders,\n      body: raw,\n      redirect: 'follow'\n    };\n    fetch(`http://localhost:3000/budget/${id}`, requestOptions).then(response => response.json()).then(result => GetMovimiento()).catch(error => console.log('error', error));\n  };\n\n  return /*#__PURE__*/_jsxDEV(FetchApiContext.Provider, {\n    value: {\n      Login,\n      userEmail,\n      setUserEmail,\n      password,\n      setPassword,\n      userName,\n      setUserName,\n      userLastName,\n      setUserLastName,\n      SignIn,\n      repetPassword,\n      setRepetPassword,\n      errorMessage,\n      setErrorMessage,\n      response,\n      setResponse,\n      AgregarMovimiento,\n      amount,\n      setamount,\n      concept,\n      setConcept,\n      type,\n      setType,\n      AgregarMovimiento,\n      movements,\n      setMovements,\n      GetMovimiento,\n      DeleteMovement,\n      hidden,\n      setHidden,\n      btnAgregar,\n      setBtnAgregar,\n      btnEditar,\n      setBtnEditar,\n      idMovement,\n      setIdMovement,\n      EditMovement,\n      totalBudget,\n      setTotalBudget,\n      incomes,\n      setIncomes,\n      egress,\n      setEgress,\n      param,\n      setParam,\n      typeLabel,\n      setTypeLabel\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 257,\n    columnNumber: 9\n  }, this);\n};\n\n_s(FetchApiContextProvider, \"LTDXQpMWhJ32hoz/DnZ+w+TC4oQ=\", false, function () {\n  return [useNavigate];\n});\n\n_c = FetchApiContextProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"FetchApiContextProvider\");","map":{"version":3,"sources":["/Users/mariamagdalenacasas/Documents/GitHub/APP-BUDGET/budget-app/src/Context/FetchApiContext.jsx"],"names":["createContext","useEffect","useState","React","useNavigate","FetchApiContext","FetchApiContextProvider","children","userEmail","setUserEmail","userName","setUserName","userLastName","setUserLastName","password","setPassword","repetPassword","setRepetPassword","errorMessage","setErrorMessage","response","setResponse","amount","setamount","concept","setConcept","type","setType","idMovement","setIdMovement","movements","setMovements","incomes","setIncomes","egress","setEgress","btnAgregar","setBtnAgregar","btnEditar","setBtnEditar","typeLabel","setTypeLabel","totalBudget","setTotalBudget","hidden","setHidden","param","setParam","navigate","IncomeArray","EgressArray","Login","handleClick","myHeaders","Headers","append","raw","JSON","stringify","requestOptions","method","headers","body","redirect","fetch","then","result","status","json","token","console","log","localStorage","setItem","id","message","error","SignIn","getItem","res","setTimeout","GetMovimiento","lastMovements","reverse","slice","counter","forEach","move","push","parseInt","ingresos","egresos","catch","AgregarMovimiento","DeleteMovement","EditMovement"],"mappings":"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","sourcesContent":["import { createContext, useEffect} from \"react\";\nimport {useState} from \"react\";\nimport React from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\nexport const FetchApiContext = createContext()\n\nexport const FetchApiContextProvider = ({children})=>{\n  const [userEmail, setUserEmail] = useState();\n  const [userName, setUserName] = useState();\n  const [userLastName, setUserLastName] = useState();\n  const [password, setPassword]= useState();\n  const [repetPassword, setRepetPassword] = useState();\n  const [errorMessage, setErrorMessage] = useState();\n  const [response, setResponse] =useState();\n  const [amount, setamount] =useState();\n  const[concept, setConcept] = useState();\n  const [type, setType] = useState();\n  const [idMovement, setIdMovement] = useState()\n  const [movements, setMovements] = useState([])\n  const [incomes, setIncomes] = useState([])\n  const [egress, setEgress] = useState([])\n  const[btnAgregar, setBtnAgregar] = useState()\n  const[btnEditar, setBtnEditar] = useState();\n  const[typeLabel, setTypeLabel] = useState(\"\");\n  const [totalBudget,setTotalBudget] = useState(0)\n  const [hidden, setHidden] =useState(\"hidden\");\n  const [param, setParam] = useState([])\n\n  const navigate = useNavigate();\n  const IncomeArray = [];\n  const EgressArray = [];\n\n  /* Fetch Login.............. */\n  const Login = async()=>{\n   const handleClick = () => {\n      navigate(\"/home\");\n    }\n\n  var myHeaders = new Headers();  \n  myHeaders.append(\"Content-Type\", \"application/json\");\n        \n  var raw = JSON.stringify({\n      \"email\": userEmail,\n      \"password\": password\n    });\n    \n  var requestOptions = {\n   method: 'POST',\n   headers: myHeaders,\n   body: raw,\n   redirect: 'follow'\n  };\n try {\n  fetch(\"http://localhost:3000/login\", requestOptions)\n\n  .then(response => {\n     return response\n  })\n  .then(result=>{\n    if(result.status == 200){\n      setErrorMessage(\"\")\n      result.json().then((token)=>{\n        console.log(token)\n        localStorage.setItem(\"token\", `Bearer ${token.token}`)\n        localStorage.setItem(\"id\", token.id)\n        handleClick() \n      })\n    }else{\n      result.json().then((message)=>{\n        setErrorMessage(message)\n      })\n    }\n  })\n } catch (error) {\n   setErrorMessage(error.message)}\n }\n\n\n\n /* Fetch Registro.............. */\n const SignIn = async()=>{\n  const redirect = () => {\n    navigate(\"/\");\n  }\n\n  var myHeaders = new Headers();\n  myHeaders.append(\"Authorization\", localStorage.getItem(\"token\"));\n  myHeaders.append(\"Content-Type\", \"application/json\");\n  \n  var raw = JSON.stringify({\n    \"name\": userName,\n    \"lastName\": userLastName,\n    \"email\": userEmail,\n    \"password\": password,\n  });\n  \n  var requestOptions = {\n    method: 'POST',\n    headers: myHeaders,\n    body: raw,\n    redirect: 'follow'\n  };\ntry { \n  fetch(\"http://localhost:3000/newUser\", requestOptions)\n  \n\n  .then(response => {\n    return response\n })\n .then(result=>{\n   console.log(result.status)\n   if(result.status === 201){\n     setErrorMessage(\"\")\n     result.json().then((res)=>{\n       setResponse(res)\n          setTimeout(() => {\n            redirect()\n            setResponse(\"\")\n       },2000);\n     })\n   }else{\n     result.json().then((message)=>{\n       console.log(message)\n     })\n   }\n })\n\n  \n} catch (error) {\n setErrorMessage(error.message)}\n\n }\n \n\n/*FETCH GET MOVIMIENTOS */\n \n const GetMovimiento= async()=>{\n  var myHeaders = new Headers();\n  myHeaders.append(\"Authorization\", localStorage.getItem(\"token\"));\n  \n  var requestOptions = {\n    method: 'GET',\n    headers: myHeaders,\n    redirect: 'follow'\n  };\n  \n  fetch(\"http://localhost:3000/budget\", requestOptions)\n    .then(response => response.json())\n    .then(result =>{ \n      const lastMovements  = result.reverse()\n      setMovements(result.reverse())\n      setParam(lastMovements.slice(-10))\n      let counter = 0;\n\n     result.forEach(move=>{\n      if(move.type ===\"INCOME\"){\n      IncomeArray.push(move)\n      counter = counter + parseInt(move.amount);\n       ingresos.push(parseInt(move.amount))\n     } else if(move.type === \"EGRESS\"){\n     EgressArray.push(move)\n     counter = counter - parseInt(move.amount);\n     egress = egress + parseInt(move.amount)\n     egresos.push(parseInt(move.amount))\n     }})\n\n     console.log(ingresos)\n      setTotalBudget(counter) \n      setEgress(EgressArray);\n      setIncomes(IncomeArray)\n\n    })\n    .catch(error => console.log('error', error));\n\n}\n \n  /* Fetch AGREGAR MOVIMIENTOS.............. */\nconst AgregarMovimiento = async()=>{\n var myHeaders = new Headers();\n myHeaders.append(\"Authorization\", localStorage.getItem(\"token\"));\n myHeaders.append(\"Content-Type\", \"application/json\");\n\n var raw = JSON.stringify({\n  \"type\": type,\n  \"amount\": amount,\n  \"concept\": concept,\n  \"user_id\":localStorage.getItem(\"id\")\n });\n\n var requestOptions = {\n  method: 'POST',\n  headers: myHeaders,\n  body: raw,\n  redirect: 'follow'\n };\n\n fetch(\"http://localhost:3000/budget\", requestOptions)\n  .then(response => response.json())\n  .then(result => console.log(result), GetMovimiento())\n  .catch(error => console.log('error', error));\n}\n \nconst DeleteMovement = async(id)=>{\n  var myHeaders = new Headers();\n  myHeaders.append(\"Authorization\", localStorage.getItem(\"token\"));\n\n var requestOptions = {\n  method: 'DELETE',\n  headers: myHeaders,\n  redirect: 'follow'\n  };\n\n fetch(`http://localhost:3000/budget/${id}`, requestOptions)\n  .then(response => response.json())\n  .then(result => GetMovimiento())\n  .catch(error => console.log('error', error));\n}\n\n\nconst EditMovement= async(id) =>{\n  var myHeaders = new Headers();\n  myHeaders.append(\"Authorization\", localStorage.getItem(\"token\"));\n  myHeaders.append(\"Content-Type\", \"application/json\");\n  \n  var raw = JSON.stringify({\n    \"amount\": amount,\n    \"concept\": concept\n  });\n  \n  var requestOptions = {\n    method: 'PUT',\n    headers: myHeaders,\n    body: raw,\n    redirect: 'follow'\n  };\n  \n  fetch(`http://localhost:3000/budget/${id}`, requestOptions)\n    .then(response => response.json())\n    .then(result => GetMovimiento())\n    .catch(error => console.log('error', error));\n }\n\n\n\n\n\n\n\n\n \n \n \n \n \n \n return <FetchApiContext.Provider value={{Login,\n   userEmail, setUserEmail, password, setPassword,userName, setUserName,userLastName,\n   setUserLastName,SignIn,repetPassword, setRepetPassword,errorMessage, setErrorMessage,\n   response, setResponse, AgregarMovimiento,amount, setamount,concept, setConcept,\n   type, setType, AgregarMovimiento,movements, setMovements,GetMovimiento,DeleteMovement,hidden, \n   setHidden,btnAgregar, setBtnAgregar,btnEditar, setBtnEditar,idMovement, setIdMovement,\n    EditMovement,totalBudget,setTotalBudget,incomes, setIncomes,egress, setEgress,param, setParam,typeLabel, setTypeLabel}}>{children}\n    </FetchApiContext.Provider>\n}"]},"metadata":{},"sourceType":"module"}